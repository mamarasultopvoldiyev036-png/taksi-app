<!DOCTYPE html>
<html>
<head>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; display: flex; flex-direction: column; gap: 10px; }
        input, button { padding: 12px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; }
        button { background: #0088cc; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h3>Taksi Buyurtma Berish</h3>
    
    <input type="text" id="to" placeholder="Qayerga borasiz?">
    <button onclick="sendOrder()">Buyurtma berish</button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        function sendOrder() {
            const to_addr = document.getElementById('to').value;
            
            if (!to_addr) {
                alert("Iltimos, boradigan manzilingizni yozing!");
                return;
            }

            // Foydalanuvchi lokatsiyasini avtomatik olish
            navigator.geolocation.getCurrentPosition(function(position) {
                const data = {
                    lat: position.coords.latitude,
                    lon: position.coords.longitude,
                    from: "GPS orqali aniqlandi", // "Qayerdan" so'ralmaydi
                    to: to_addr
                };
                
                // Botga ma'lumotni yuborish
                tg.sendData(JSON.stringify(data));
                tg.close();
            }, function(error) {
                alert("Lokatsiyani aniqlashga ruxsat bering!");
            });
        }
    </script>
</body>
</html>
